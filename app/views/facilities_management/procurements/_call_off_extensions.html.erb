<div class="govuk-!-margin-top-5">
  <div class="govuk-form-group <%= 'govuk-form-group--error' if %i[optional_call_off_extensions_1 optional_call_off_extensions_2 optional_call_off_extensions_3 optional_call_off_extensions_4].any? { | extension | @procurement.errors.keys.include? extension } || @procurement.errors[:extensions_required].any?%>" data-propertyname="Extensions choice">
    <fieldset class="govuk-fieldset" role="group" aria-describedby="initial_call_off_end_date_label">
    <legend class="govuk-fieldset__legend">
    <span class="govuk-heading-m govuk-!-margin-bottom-0"> Do you want the option to extend your call-off contract? </span>
    </legend>
    <p class="govuk-caption-m govuk-!-margin-top-0 govuk-!-width-two-thirds"><%= t('.description') %></p>
    <span id="extensions-required-warning"/>
    <div class="govuk-radios govuk-!-margin-top-3" data-propertyname="Extensions choice">
      <%= display_errors(f.object, :extensions_required)%>
      <div class="govuk-radios__item">
        <%= f.radio_button :extensions_required, true, class: "govuk-radios__input" %>
        <%= f.label :extensions_required, 'Yes', value: true, class: 'govuk-label govuk-radios__label' %>
        <!-- Content for when yes is selected hidden when no is selected -->
        <div id="radio-inner-content-for-call-off-extensions" class="radio-inner-content govuk-!-margin-top-3">
          <div id="ext1-container" class="ext-container govuk-form-group govuk-!-margin-left-3" data-propertyname="Extension period 1">
            <%= f.label :optional_call_off_extensions_1, 'Extension period 1', class: 'govuk-heading-s govuk-!-margin-bottom-1' %>
            <%= display_errors(f.object, :optional_call_off_extensions_1)%>
            <%= f.number_field :optional_call_off_extensions_1, class: "govuk-input govuk-input--width-5 #{'govuk-input--error' if @procurement.errors[:optional_call_off_extensions_1].any?}", min: 1, max: '10' %>
            <span class="govuk-label--s govuk-!-margin-left-2"> years </span>
          </div>

          <div id="ext2-container" class="ext-container govuk-form-group govuk-!-margin-left-3
                                        <%= ' govuk-visually-hidden' if @procurement.optional_call_off_extensions_2.blank? && @procurement.errors[:optional_call_off_extensions_2].empty? %>"
               data-propertyname="Extension period 2">
            <%= f.label :optional_call_off_extensions_2, 'Extension period 2', class: 'govuk-heading-s govuk-!-margin-bottom-1' %>
            <%= display_errors(f.object, :optional_call_off_extensions_2)%>
            <%= f.number_field :optional_call_off_extensions_2, class: "govuk-input govuk-input--width-5 #{'govuk-input--error' if @procurement.errors[:optional_call_off_extensions_2].any?}", min: 1, max: '7', 'aria-hidden': true, tabindex: -1 %>
            <span class="govuk-label--s govuk-!-margin-left-2"> years </span>
            <%= f.hidden_field :call_off_extension_2, value: !@procurement.optional_call_off_extensions_2.nil? || @procurement.errors[:optional_call_off_extensions_2].any? %>
            <button id="fm-ext2-remove-btn" class="govuk-button govuk-button--secondary govuk-!-margin-bottom-0 <%= 'govuk-visually-hidden' unless @procurement.optional_call_off_extensions_3.blank? %>" aria-hidden='true', tabindex='-1'>Remove</button>
          </div>

          <div id="ext3-container" class="ext-container govuk-form-group govuk-!-margin-left-3
                                 <%= ' govuk-visually-hidden ' if @procurement.optional_call_off_extensions_3.blank? && @procurement.errors[:optional_call_off_extensions_3].empty? %>"
               data-propertyname="Extension period 3">
            <%= f.label :optional_call_off_extensions_3, 'Extension period 3', class: 'govuk-heading-s govuk-!-margin-bottom-1' %>
            <%= display_errors(f.object, :optional_call_off_extensions_3)%>
            <%= f.number_field :optional_call_off_extensions_3, class: "govuk-input govuk-input--width-5 #{'govuk-input--error' if @procurement.errors[:optional_call_off_extensions_3].any?}", min: 1, max: '7', 'aria-hidden': true, tabindex: -1 %>
            <span class="govuk-label--s govuk-!-margin-left-2"> years </span>
            <%= f.hidden_field :call_off_extension_3, value: !@procurement.optional_call_off_extensions_3.nil? || @procurement.errors[:optional_call_off_extensions_3].any? %>
            <button id="fm-ext3-remove-btn" class="govuk-button govuk-button--secondary govuk-!-margin-bottom-0 <%= 'govuk-visually-hidden' unless @procurement.optional_call_off_extensions_4.blank? %>" aria-hidden='true', tabindex='-1'>Remove</button>
          </div>
          <div id="ext4-container" class="ext-container govuk-form-group govuk-!-margin-left-3
                                 <%= ' govuk-visually-hidden' if @procurement.optional_call_off_extensions_4.blank? && @procurement.errors[:optional_call_off_extensions_4].empty? %>"
               data-propertyname="Extension period 4">
            <%= f.label :optional_call_off_extensions_4, 'Extension period 4', class: 'govuk-heading-s govuk-!-margin-bottom-1' %>
            <%= display_errors(f.object, :optional_call_off_extensions_4)%>
            <%= f.number_field :optional_call_off_extensions_4, class: "govuk-input govuk-input--width-5 #{'govuk-input--error' if @procurement.errors[:optional_call_off_extensions_4].any?}", min: 1, max: '7', 'aria-hidden': true, tabindex: -1 %>
            <span class="govuk-label--s govuk-!-margin-left-2"> years </span>
            <%= f.hidden_field :call_off_extension_4, value: !@procurement.optional_call_off_extensions_4.nil? || @procurement.errors[:optional_call_off_extensions_4].any? %>
            <button id="fm-ext4-remove-btn" class="govuk-button govuk-button--secondary govuk-!-margin-bottom-0" aria-hidden='true', tabindex='-1'>Remove</button>
          </div>
          <button id="fm-add-contract-ext-btn" class="govuk-button govuk-button--secondary govuk-!-margin-left-3 govuk-!-margin-top-3" aria-label="<%= t('.add_extension_period') %>">+
            <%= t('.add_extension_period') %>
          </button>
        </div>
      </div>
      <div class="govuk-radios__item">
        <%= f.radio_button :extensions_required, false, class: "govuk-radios__input" %>
        <%= f.label :extensions_required, 'No', value: false, class: 'govuk-label govuk-radios__label' %>
      </div>
    </div>
    </fieldset>
  </div>
</div>
