<%= link_to 'Return to services and buildings template', facilities_management_procurement_path(id: @spreadsheet_import.procurement.id, 'spreadsheet': true), class: 'govuk-back-link' %>
  <%= form_for @spreadsheet_import, url: facilities_management_procurement_spreadsheet_imports_path, method: :post, html: { novalidate: true, multipart: true } do |f| %>

  <%= govuk_form_group_with_optional_error(@spreadsheet_import, :name) do %>
    <%= render partial: 'shared/error_summary', locals: { errors: f.object.errors } %>
  <% end %>

  <% if @spreadsheet_import_error.present? %>
    <div class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" data-module="error-summary">
      <h2 class="govuk-error-summary__title" id="error-summary-title">
        <%= t("shared.error_summary.there_is_a_problem") %>
      </h2>
      <div class="govuk-error-summary__body">
        <ul class="govuk-list govuk-error-summary__list">
          <li>
            <%= link_to "#{@spreadsheet_import_error}", "##{error_id(:spreadsheet_file)}" %>
          </li>
        </ul>
      </div>
    </div>
  <% end %>

  <span class="govuk-caption-xl"><%= @spreadsheet_import.procurement.contract_name %></span>
  <h1 class="govuk-heading-xl"><%= t('.heading') %></h1>

  <div class="govuk-body govuk-!-width-two-thirds">
    <%= t('.description') %>
    <details class="govuk-details govuk-!-margin-top-2 govuk-!-width-two-thirds" data-module="govuk-details">
      <summary class="govuk-details__summary">
      <span class="govuk-details__summary-text">
        <%= t('.check') %>
      </span>
      </summary>
      <div class="govuk-details__text">
        <%= t('.check_details') %>
      </div>
    </details>
  </div>
  <div class="govuk-form-group <%= 'govuk-form-group--error govuk-!-padding-bottom-3' if  @spreadsheet_import_error.present? %>">
    <div class="govuk-heading-m govuk-!-margin-top-4">
      <%= t('.upload') %>
    <span class="govuk-caption-m govuk-!-margin-top-2"><%= t('.upload_size') %></span>
    </div>
    <div class="govuk-!-margin-top-4 govuk-!-width-two-thirds govuk-body ccs-font-weight-semi-bold">
      <%= t('.once_selected') %>
    </div>

    <div class="govuk-!-margin-top-2 govuk-!-width-two-thirds">
      <% if @spreadsheet_import_error.present? %>
        <span id="<%= error_id(:spreadsheet_file)%>" class="govuk-error-message">
          <%= @spreadsheet_import_error %>
        </span>
      <% end %>
      <% if @spreadsheet_import_error.present? %>
        <hr class="govuk-section-break govuk-!-margin-top-4">
      <% end %>
      <span class="<%= 'govuk-file-upload--error' if @spreadsheet_import_error.present? %>">
        <%= f.file_field :spreadsheet_file %>
        <%= f.hidden_field :facilities_management_procurement_id, value: @spreadsheet_import.facilities_management_procurement_id %>
      </span>
    </div>
  </div>

  <div class="govuk-warning-text">
    <span class="govuk-warning-text__icon" aria-hidden="true">!</span>
    <strong class="govuk-warning-text__text govuk-!-width-two-thirds">
      <span class="govuk-warning-text__assistive">Warning</span>
      <%= t('.warning') %>
    </strong>
  </div>

      <div class="govuk-!-margin-top-4">
        <%= f.submit 'Upload my services and buildings', class: "govuk-button govuk-!-margin-top-4", 'aria-label': t('.submit') %>
        <%= link_to 'Cancel and return to services and buildings template', facilities_management_procurement_path(id: @spreadsheet_import.procurement.id, 'spreadsheet': true), class: 'govuk-button govuk-button--secondary govuk-!-margin-top-4 govuk-!-margin-left-4' %>
      </div>
  <% end %>