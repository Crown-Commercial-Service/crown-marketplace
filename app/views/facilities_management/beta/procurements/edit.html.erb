<div class="govuk-grid-row">
  <span class="govuk-caption-xl"><%= @procurement.detailed_search? ? t('.detailed_search') : t('.quick_search') %> - <%= @procurement.name %></span>
</div>

<div class="procurement govuk-grid-row">
  <div class="govuk-grid-column-full">
    <%= form_for @procurement, url: facilities_management_beta_procurement_path(@procurement.id), method: :put, html: { multipart: true } do |f| %>
      <%= govuk_form_group_with_optional_error(@procurement, :name) do %>
        <% if @procurement.quick_search? %>
          <%= render partial: 'quick_search_form', locals: { f: f } %>
        <% else %>
          <%= render partial: "facilities_management/beta/procurements/edit/#{params[:step]}", locals: { f: f } %>
        <% end %>
      <% end %>
      <%= f.hidden_field :step, value: params[:step] if params[:step] %>
      <div class="govuk-grid-row">
        <%= f.submit t('.save_and_continue'), class: 'govuk-button', name: @procurement.detailed_search? ? 'next_step' : 'start_detailed_search' %>
        <%= f.submit t('.save_and_return_to_detailed_summary'), class: 'govuk-button govuk-button--secondary govuk-!-margin-left-3'  if @procurement.detailed_search? %>
        <%= f.submit t('.save_for_later'), class: 'govuk-button govuk-button--secondary govuk-!-margin-left-3'  if @procurement.quick_search? %>
      </div>

      <% if params[:step] %>
        <div class="govuk-grid-row">
          <span class="govuk-caption-m"><%= t(".next_step.#{params[:step]}") %></span>
        </div>
      <% end %>

      <% if @procurement.detailed_search? %>
        <div class="govuk-grid-row govuk-!-margin-top-3">
          <%= link_to 'Back to detailed search summary', facilities_management_beta_procurement_path(@procurement), class: 'govuk-link--no-visited-state' %>
        </div>
      <% end %>
    <% end %>
  </div>
</div>
