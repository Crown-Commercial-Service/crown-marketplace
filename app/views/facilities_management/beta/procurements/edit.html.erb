<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <span class="govuk-caption-xl"><%= t('.detailed_search') %> - <%= @procurement.name %></span>
  </div>
</div>

<% if params[:step] %>
  <h1 class="govuk-heading-xl"><%= params[:step].humanize %></h1>
<% end %>

<%= form_for @procurement, url: facilities_management_beta_procurement_path(@procurement), method: :patch, html: { class: 'ccs-form', multipart: true }  do |f| %>

  <div class="govuk-form-group">

    <div class="govuk-error-message govuk-visually-hidden" aria-labelledby="error-summary-title" role="alert" data-module="govuk-error-summary">
      <h2 class="govuk-error-summary__title" id="error-summary-title">
        There is a problem
      </h2>
      <div class="govuk-error-message govuk-visually-hidden" data-validation="maxlength">
        <span><%= t('.name_text_length_warning') %></span>
      </div>

      <div class="govuk-error-message govuk-visually-hidden" data-validation="required">
       <span><%= t('.name_text_required') %></span>
      </div>
    </div>

  <% if params[:step] == 'estimated_annual_cost' %>

    <legend class="govuk-fieldset__legend govuk-fieldset__legend--m govuk-!-font-weight-bold">
      <h1 class="govuk-fieldset__heading">
        Do you know your current or estimated cost?
      </h1>
    </legend>
    <span id="hint-radio-c" class="govuk-hint govuk-!-font-size-20">
        This will help us to place you into the correct sub-lot.
        The cost shouldn't include all the buildings and services included in the procurement.
        The cost shouldn't include additional or project work
    </span>

    <div class="govuk-radios govuk-radios">
      <div class="govuk-radios__item">
        <%= f.radio_button :tupe, true, :checked => true, class: "govuk-radios__input" %>
        <%= label :tupe, 'Yes', class: 'govuk-label govuk-radios__label' %>
      </div>

      <div class="govuk-inset-text">
        <h1 class="govuk-heading-xl"><%= f.label 'Enter the estimated annual cost, excluding VAT', class: "govuk-label" %></h1>
        <%= f.number_field :estimated_annual_cost, class: 'govuk-input govuk-input--width-20', placeholder: '£', maxlength: '100' %>
      </div>

      <div class="govuk-radios__item">
        <%= f.radio_button :tupe, false, class: 'govuk-radios__input' %>
        <%= label :tupe, 'No', class: "govuk-label govuk-radios__label" %>
      </div>
    </div>



  <% elsif params[:step] == 'tupe' %>

    <div class="govuk-radios govuk-radios">
      <div class="govuk-radios__item">
        <%= f.radio_button :tupe, true, :checked => true, class: "govuk-radios__input" %>
        <%= label :tupe, 'Yes', class: 'govuk-label govuk-radios__label' %>
      </div>
      <div class="govuk-radios__item">
        <%= f.radio_button :tupe, false, class: 'govuk-radios__input' %>
        <%= label :tupe, 'No', class: "govuk-label govuk-radios__label" %>
      </div>
    </div>

  <% else %>

    <div class="govuk-character-count" data-module="character-count" data-maxlength="100">

        <legend class="govuk-fieldset__legend govuk-fieldset__legend--m govuk-!-font-weight-bold">
            <h1 class="govuk-fieldset__heading">
              <%= t('.contract_name_question') %>
            </h1>
        </legend>

        <span id="with-hint-hint" class="govuk-hint">
          <%= t('.contract_name_info') %>
        </span>

        <%= f.label :contract_name, class: "govuk-label" %>
        <%= f.text_field :contract_name, class: 'govuk-input govuk-input--width-30 js-character-count', maxlength: 100%>



    </div>

  <% end %>

  </div>

  <%= f.button :button, type: :submit, name: 'submit_choice', value: 'continue', class: 'govuk-button' do %>
  <%= t('.save_and_continue') %>
  <% end %>

  <%= f.button :button, type: :submit, name: 'submit_choice', value: 'return', class: 'govuk-button govuk-button--secondary govuk-!-margin-left-3' do %>

  <%= t('.save_and_return') %>
  <% end %>

<% end %>



<span id="hint-radio-c" class="govuk-hint govuk-!-font-size-20">
  Next: TUPE
</span>
