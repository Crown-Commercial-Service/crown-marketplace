<h1 class="govuk-heading-xl">
  <%= t('.heading') %>
</h1>

<%= warning_text(t('facilities_management.rm3830.admin.you_cannot_update.rates')) %>

<p class="govuk-body govuk-!-font-weight-regular govuk-hint">
  <%= t('.leading_text') %><br/>
  <%= t('.percentage_note') %>
</p>

<% @full_services.each do |service| %>
  <% rate_is_money = service['value_type'] == 'money' %>

  <table class="govuk-table">
    <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        <th scope="col" class="govuk-table__header app-custom-class govuk-!-font-weight-bold govuk-!-width-one-quarter left"><%= service['name'] %></th>
        <th scope="col" class="govuk-table__header app-custom-class govuk-!-font-weight-bold left"><%= t('.rate') %></th>
      </tr>
    </thead>
    <tbody class="govuk-table__body">
      <% service['work_package'].each do |work_pckg| %>
        <tr class="govuk-table__row">
          <th class="govuk-table__header govuk-!-width-two-thirds govuk-!-font-weight-regular supplier-rates-td" scop="row">
            <%= "#{work_pckg['code']} #{work_pckg['name']}" %>
          </th>
          <td class="govuk-table__cell supplier-rates-td">
            <% rate = work_pckg['rate_standard_a_or_blank'].read_attribute_before_type_cast(:framework) %>

            <%= "#{rate_is_money ? 'Â£' : ''}#{rate * (rate_is_money ? 1.0 : 100.0)}#{rate_is_money ? '' : '%'}" if rate %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>

<h2 class="govuk-heading-xl govuk-!-font-weight-bold govuk-!-margin-bottom-2">
  <%= t('.heading_two') %>
</h2>

<%= render 'variance_table', { attribue: :framework } %>