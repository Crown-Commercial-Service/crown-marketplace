<fieldset class="govuk-fieldset">
  <%= form_group_with_error(f.object, :security_policy_document_required) do |displayed_error| %>
    <div class="govuk-!-margin-top-3">
      <span class="govuk-heading-s govuk-!-margin-bottom-0">
        <legend class="govuk-fieldset__legend">
          <%= t('.question') %>
        </legend>
      </span>
    </div>

    <div class="govuk-!-margin-top-3">
      <%= displayed_error %>
      <%= govuk_radios_conditional do %>
        <%= govuk_radios_conditional_item(f, :security_policy_document_required, true, 'Yes') %>
        <%= govuk_radios_conditional_area(:security_policy_document_required, true) do %>
          <%= form_group_with_error(f.object, :security_policy_document_name) do |name_error| %>
            <h2 class="govuk-heading-m govuk-!-margin-left-3"><%= t('.document_name.title') %></h2>
            <div class="govuk-!-margin-left-3">
              <%= f.label :security_policy_document_name, t('.document_name.label'), class: "govuk-label" %>
              <%= name_error %>
              <%= f.text_field :security_policy_document_name, class: 'govuk-input govuk-input--width-20' %>
            </div>
          <% end %>
          <%= form_group_with_error(f.object, :security_policy_document_version_number) do |version_number_error| %>
            <h2 class="govuk-heading-m govuk-!-margin-left-3 govuk-!-margin-top-8"><%= t('.document_version_number.title') %></h2>
            <div class="govuk-!-margin-left-3">
              <%= f.label :security_policy_document_version_number, t('.document_version_number.label'), class: "govuk-label" %>
              <%= version_number_error %>
              <%= f.text_field :security_policy_document_version_number, class: 'govuk-input govuk-input--width-10' %>
            </div>
          <% end %>
          <%= form_group_with_error(f.object, :security_policy_document_date) do |date_error| %>
            <h2 class="govuk-heading-m govuk-!-margin-left-3 govuk-!-margin-top-8"><%= t('.document_date.title') %></h2>
            <div class="govuk-!-margin-left-3">
              <%= f.label :security_policy_document_date, t('.document_date.label'), class: "govuk-label" %>
              <%= date_error %>
              <%= f.gov_uk_date_field :security_policy_document_date, legend_options: { page_heading: false, visually_hidden: true }, class: 'govuk-input govuk-input--width-20' %>
            </div>
          <% end %>
          <%= form_group_with_error(f.object, :security_policy_document_file) do |file_error| %>
            <h2 class="govuk-heading-m govuk-!-margin-left-3 govuk-!-margin-top-8"><%= t('.document.title') %></h2>
            <p class="govuk-!-margin-left-3"><%= t('.document.guidance') %></p>
            <div class="govuk-!-margin-left-3 govuk-body">
              <%= file_error %>
              <% if @procurement.security_policy_document_file.attached? %>
                <%= f.label :security_policy_document_file, 'Uploaded file', class: "govuk-label ccs-font-weight-semi-bold" %>
                <%= @procurement.security_policy_document_file.filename.to_s %> <br/>
                <%= f.file_field :security_policy_document_file, class: 'govuk-file-upload' %>
              <% else %>
                <%= f.label :security_policy_document_file, 'Upload a file', class: "govuk-label ccs-font-weight-semi-bold" %>
                <%= f.file_field :security_policy_document_file, class: 'govuk-file-upload' %>
              <% end %>
              <div class="govuk-!-margin-top-3">
                <%= warning_text(t('.guidance')) %>
              </div>
            </div>
          <% end %>
        <% end %>
        <%= govuk_radios_conditional_item(f, :security_policy_document_required, false, 'No') %>
      <% end %>
    </div>
  <% end %>
</fieldset>
