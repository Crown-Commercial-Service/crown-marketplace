<% content_for :page_title, t(".heading.#{@section}") %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <%= form_with url: facilities_management_buyer_detail_path(params[:framework], section: @section), model: @buyer_detail, method: :put, html: { novalidate: true } do |f| %>
      <%= render partial: 'shared/error_summary', locals: { errors: @buyer_detail.errors } %>

      <%= govuk_fieldset(
        legend: {
          text: t(".heading.#{@section}"),
          classes: 'govuk-fieldset__legend--l',
          is_page_heading: true,
          caption: {
            text: current_user.email,
            classes: 'govuk-caption-l'
          }
        }
      ) do %>
        <%= render partial: "facilities_management/buyer_details/sections/#{@section}", locals: { form: f } %>
      <% end %>

      <%= govuk_button(t('.save_and_return'), form: f, attributes: { aria: { label: t('.save_and_return') } }) %>
    <% end %>
  </div>
</div>
