<%= add_optional_error_prefix_to_page_title(@journey.errors) %>


<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">

      <%= render partial: 'shared/error_summary', locals: { errors: @journey.errors } %>

      <div id="ccs-error-sum" class="govuk-error-summary govuk-visually-hidden ccs-e-msg" aria-labelledby="error-summary-title" role="alert" data-module="error-summary">
        <h2 class="govuk-error-summary__title" id="error-summary-title"><%= t('common.error_summary_title') %></h2>
        <div class="govuk-error-summary__body">
          <ul id="ccs-error-sum-list" class="govuk-list govuk-error-summary__list">
            <li>
              <a href="#lot_region_Administrative_and_public_law">
                <%= t('activemodel.errors.models.legal_services/journey/lot2_full_service.attributes.lot2_full_service.too_short') %>
              </a>
            </li>
          </ul>
        </div>
      </div>


      <%= form_tag @form_path, id: 'lot2_full_service', class: 'ccs-form', method: :get do %>
        <%= hidden_fields_for_previous_steps_and_responses(@journey) %>

        <div class="govuk-grid-row">
          <div class="govuk-grid-column-full">

            <h1 class="govuk-caption-m govuk-!-margin-bottom-1">
              <%= t('.heading') %>
            </h1>

          </div>
        </div>

        <%= govuk_form_group_with_optional_error(@journey, :lot2_full_service) do %>

          <div id="ccs-dynamic-accordian" class="govuk-grid-row">
            <section id="accordion-default" class="govuk-grid-column-two-thirds">

              <%= govuk_fieldset_with_optional_error(@journey, :lot2_full_service) do %>

                <legend class="govuk-fieldset__legend govuk-fieldset__legend--m govuk-!-margin-bottom-1">
                  <%= t('.hint') %>
                </legend>

                <%= display_error(@journey, :lot2_full_service) %>

                <span id="legal_services-error" class="govuk-error-message govuk-visually-hidden ccs-e-msg">
                  <%= t('activemodel.errors.models.legal_services/journey/lot2_full_service.attributes.lot2_full_service.too_short') %>
                </span>

                <div class="govuk-checkboxes ccs-govuk-checkboxes--thin">

                  <% lot1 = ['Administrative and public law', 'Banking and Finance','Charities law', 'Child law','Contracts','Competion law', 'Corporate and M&A','Data Protection and information law','Education law', 'Employment', 'Energy and natural resources','EU', 'Food,rural and enviromental affairs','Franchise law','Health and healthcare','Health and safety law', 'Information Technology', 'Infrastructure', 'Intellectual Property','Licensing','Life sciences', 'Litigation and dispute resolution', 'Outsourcing/insourcing', 'Partnerships', 'Pensions', 'Planning', 'Projects', 'Public international law', 'Public procurement', 'Property, real estate & construction', 'Restructuring and insolvancy', 'Tax', 'Telecommunications','The law of international trade investment and regulation', 'Transport law (excluding rail)'] %>

                  <% lot1.each do |lot2_full_service| %>
                    <div class="govuk-checkboxes__item">
                      <% lot2_full_service_no_slash = lot2_full_service.gsub('/', '_') %>
                      <% lot2_full_service_no_and = lot2_full_service.gsub('&', '_') %>
                      <% lot_region_no_space = lot2_full_service_no_and.gsub(' ', '_') %>
                      <%= check_box_tag(
                                "lot2_full_service",
                                lot2_full_service,
                                false,
                                class: "govuk-checkboxes__input",
                                id: "lot_region_#{lot_region_no_space}"
                              ) %>
                      <label class="govuk-label govuk-checkboxes__label" for="lot_region_<%= lot_region_no_space %>">
                        <%= lot2_full_service %>
                      </label>
                    </div>
                  <% end %>
                </div>

                <%= submit_tag t('common.submit'), id: 'submit01', class: "govuk-button govuk-!-margin-top-6 govuk-!-margin-bottom-8 govuk-!-padding-left-7 govuk-!-padding-right-7" %>

              <% end %>
            </section>

            <section class="govuk-grid-column-one-third">
              <div id="css-list-basket">
                <%= submit_tag t('common.submit'), id: 'submit02', class: "govuk-button" %>

                <div>
                  <h3 class="govuk-heading-m" data-txt01="<%= t('.txt01') %>" data-txt02="<%= t('.txt02') %>"><span></span> <span></span></h3>
                  <a role="button" href="#" class="ccs-remove govuk-link--no-visited-state ccs-no-print" id="removeAll"><%= t('.remove_all') %></a>
                  <ul class="govuk-list"></ul>
                </div>
              </div>
            </section>

          </div>

        <% end %>

      <% end %>
  </div>
</div>
