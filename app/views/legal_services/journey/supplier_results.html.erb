<%= add_optional_error_prefix_to_page_title(@journey.errors) %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">

    <%= render partial: 'shared/error_summary', locals: { errors: @journey.errors } %>

    <div id="ccs-error-sum" class="govuk-error-summary govuk-visually-hidden ccs-e-msg" aria-labelledby="error-summary-title" role="alert" data-module="error-summary">
      <h2 class="govuk-error-summary__title" id="error-summary-title"><%= t('common.error_summary_title') %></h2>
      <div class="govuk-error-summary__body">
        <ul id="ccs-error-sum-list" class="govuk-list govuk-error-summary__list">
          <li>
            <a href="#lot_Property_and_construction">
              <%= t('activemodel.errors.models.legal_services/journey/lot1_regional_service.attributes.lot1_regional_service.too_short') %>
            </a>
          </li>
        </ul>
      </div>
    </div>

    <%= form_tag @form_path, class: 'ccs-form', id: 'lot1_regional_service', method: :get do %>
      <%= hidden_fields_for_previous_steps_and_responses(@journey) %>

          <div class="govuk-grid-row">
            <div class="govuk-grid-column-full">
              <h1 class="govuk-caption-m govuk-!-margin-bottom-1">
                <%= t('.heading') %>
              </h1>
            </div>
          </div>

        <%= govuk_form_group_with_optional_error(@journey, :lot1_region) do %>

          <div id="ccs-dynamic-accordian" class="govuk-grid-row">
            <section id="accordion-default" class="govuk-grid-column-two-thirds">

                <%= govuk_fieldset_with_optional_error(@journey, :lot1_region) do %>

                <legend class="govuk-fieldset__legend govuk-fieldset__legend--m govuk-!-margin-bottom-1">
                  <%= t('.hint') %>
                </legend>

                <%= display_error(@journey, :lot1_region) %>

                <span id="legal_services-error" class="govuk-error-message govuk-visually-hidden ccs-e-msg">
                  <%= t('activemodel.errors.models.legal_services/journey/lot1_regional_service.attributes.lot1_regional_service.too_short') %>
                </span>

                <div class="ccs-search-results">
                  <%sqlHash = {} %>
                  <% params[:lot1].each do | arg | %>
                    <% arg_no_slash = arg.gsub('/', '_') %>
                    <% arg_no_space = arg_no_slash.gsub(' ', '_') %>
                    <% arg = arg_no_space.downcase %>
                    <% sqlStr = "{:#{arg}=>'x'}" %>
                    <% sqlHash1 = eval(sqlStr) %>
                    <% sqlHash = sqlHash.merge(sqlHash1) %>
                  <%end %>
                  <% sqlStr ="{:region=>#{params[:region1]}}" %>
                  <% sqlHash1 = eval(sqlStr) %>
                  <% sqlHash = sqlHash.merge(sqlHash1) %>
                  <% lot =  LegalServices::Region.where(sqlHash) %>
                  <% sqlHash1 = eval(sqlStr) %>
                  <% sqlHash = sqlHash.merge(sqlHash1) %>
                  <% byebug %>
                  <% lot1 = lot.shuffle %>
                  <p><b><span class="govuk-!-font-size-27">lot1.count</span> <%= t('.suppliers') %></b> <%= t('.suppliers_pt2') %></p>
                  <% lot1.each do |lot| %>
                    <div class="govuk-checkboxes__item">
                      <% lot_no_slash = lot.firm.gsub('/', '_') %>
                      <% lot_no_space = lot_no_slash.gsub(' ', '_') %>
                      <%= check_box_tag(
                                  "lot1_firm",
                                  lot.firm,
                                  false,
                                  class: "govuk-checkboxes__input",
                                  id: "lot_#{lot_no_space}"
                                ) %>
                    
                      <ul class="ccs-results-list govuk-!-margin-bottom-7">
                        <li class="govuk-list govuk-!-padding-top-4 govuk-!-padding-bottom-4">
                          <%= lot.firm %>
                        </li>
                      </ul>
                    </div>
                  <% end %>
                </div>

                <p id="hint" class="govuk-body govuk-!-margin-top-7 govuk-!-margin-bottom-0">
                  <%= t('.links_text_html') %>
                </p>

              <%= submit_tag t('common.submit'), id: 'submit01', class: "govuk-button govuk-!-margin-top-6 govuk-!-margin-bottom-8 govuk-!-padding-left-7 govuk-!-padding-right-7" %>
            </section>

            <section class="govuk-grid-column-one-third">
              <div id="css-list-basket">
                <%= submit_tag t('common.submit'), id: 'submit02', class: "govuk-button" %>

                <div>
                  <h3 class="govuk-heading-m" data-txt01="<%= t('.txt01') %>" data-txt02="<%= t('.txt02') %>"><span></span> <span></span></h3>
                  <a role="button" href="#" class="ccs-remove govuk-link--no-visited-state ccs-no-print" id="removeAll"><%= t('.remove_all') %></a>
                  <ul class="govuk-list"></ul>
                </div>
              </div>
            </section>

          </div>

        <% end %>
      <% end %>

    <% end %>


      <%= hidden_fields_for_previous_steps_and_responses(@journey) %>




<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

    <span class="govuk-caption-xl govuk-!-margin-bottom-0">
      <%= t('.sub_heading') %>
    </span>

    <h1 class="govuk-heading-xl govuk-!-margin-bottom-5">
      <%= t('.heading') %>
    </h1>

    <p><b><span class="govuk-!-font-size-27">5</span> <%= t('.suppliers') %></b> <%= t('.suppliers_pt2') %></p>

    <a href="#" role="button" class="govuk-button govuk-!-padding-left-6 govuk-!-padding-right-6 govuk-!-margin-top-2"><%= t('.download') %></a>

    <div class="ccs-search-results">

      <ul class="ccs-results-list govuk-!-margin-bottom-7">
        <li class="govuk-list govuk-!-padding-top-4 govuk-!-padding-bottom-4">
          <a href="#" class="govuk-heading-s govuk-link--no-visited-state ccs-no-underline">
            Lorem ipsum
          </a>
        </li>
        <li class="govuk-list govuk-!-padding-top-4 govuk-!-padding-bottom-4">
          <a href="#" class="govuk-heading-s govuk-link--no-visited-state ccs-no-underline">
            Curabitur tellus enim
            <abbr class="govuk-!-font-size-14 ccs-tag" title="Small and medium enterprise">SME</abbr>
          </a>
        </li>
        <li class="govuk-list govuk-!-padding-top-4 govuk-!-padding-bottom-4">
          <a href="#" class="govuk-heading-s govuk-link--no-visited-state ccs-no-underline">
            Nullam lobortis nibh
            <abbr class="govuk-!-font-size-14 ccs-tag" title="Small and medium enterprise">SME</abbr>
          </a>
        </li>
        <li class="govuk-list govuk-!-padding-top-4 govuk-!-padding-bottom-4">
          <a href="#" class="govuk-heading-s govuk-link--no-visited-state ccs-no-underline">
            Nunc et volutpat massa
          </a>
        </li>
        <li class="govuk-list govuk-!-padding-top-4 govuk-!-padding-bottom-4">
          <a href="#" class="govuk-heading-s govuk-link--no-visited-state ccs-no-underline">
            Duis placerat facilisis
          </a>
        </li>
        <li class="govuk-list govuk-!-padding-top-4 govuk-!-padding-bottom-4">
          <a href="#" class="govuk-heading-s govuk-link--no-visited-state ccs-no-underline">
            Morbi sit amet elit
          </a>
        </li>
        <li class="govuk-list govuk-!-padding-top-4 govuk-!-padding-bottom-4">
          <a href="#" class="govuk-heading-s govuk-link--no-visited-state ccs-no-underline">
            Pellentesque posuere
            <abbr class="govuk-!-font-size-14 ccs-tag" title="Small and medium enterprise">SME</abbr>
          </a>
        </li>
      </ul>                 <!-- **** what message if there are no results? **** -->

      <!-- numbered pagination HTML example two starts -->
      <nav aria-label="Pagination Navigation">
        <ul class="govuk-list ccs-pagination">
            <li><a href="http://www.url.com" aria-current="true">1</a></li>
            <li><a href="http://www.url.com">2</a></li>
            <li><a href="http://www.url.com">3</a></li>
            <li>&hellip;</li>
            <li><a href="http://www.url.com">94</a></li>
            <li class="ccs-last">
                <a href="http://www.url.com" rel="next">Next page&nbsp;<b>&rarr;</b></a>
            </li>
        </ul>
      </nav><!-- numbered pagination HTML example two ends -->

    </div>

  </div>
</div>
