<%= content_for :page_title, t('.heading') %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-three-quarters" id="cookie-settings-saved" <%= 'hidden' unless params[:cookies_updated] %>>
    <%= govuk_notification_banner(t('.cookies_saved'), true) %>
  </div>
  <div class="govuk-grid-column-three-quarters" id="cookie-settings-not-saved" hidden>
    <%= govuk_notification_banner(t('.cookies_not_saved'), classes: 'ccs-notification-banner--error', title_text: t('.error')) %>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-three-quarters">
    <h1 class="govuk-heading-xl">
      <%= t('.heading') %>
    </h1>
    <p>
      <%= t('.what_are_cookies') %>
    </p>
    <p >
      <%= t('.why_we_use_them') %>
    </p>
    <p>
      <%= t('home.cookies.website_has_4_services') %>
    </p>
    <ul class="govuk-list govuk-list--bullet">
      <li><%= t('home.cookies.facilities_management') %></li>
      <li><%= t('home.cookies.legal_services') %></li>
      <li><%= t('home.cookies.management_consultancy') %></li>
      <li><%= t('home.cookies.supply_teachers') %></li>
    </ul>
    <p>
      <%= t('.settings_will_apply') %>
    <p>
  </div>
</div>

<hr class="govuk-section-break govuk-section-break--m">

<div class="govuk-grid-row">
  <div class="govuk-grid-column-three-quarters">
    <h2 class="govuk-heading-m">
      <%= t('.cookie_settings') %>
    </h2>
    <p>
      <%= t('.the_number_we_use') %>
    </p>
  </div>
</div>

<%= form_with method: :put, id: 'update-cookie-setings', html: { specialvalidation: true } do |f| %>
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-three-quarters">
      <h2 class="govuk-heading-m">
        <%= t('home.cookies.measure_website_use.title') %>
      </h2>

      <fieldset class="govuk-fieldset">
        <legend class="govuk-fieldset__legend">
          <h3 class="govuk-fieldset__heading govuk-heading-m">
            <%= t('home.cookies.measure_website_use.ga') %>
          </h3>
        </legend>

        <%= render partial: 'home/ga_cookies_info' %>

        <div class="govuk-radios">
          <div class="govuk-radios__item">
            <%= radio_button_tag :ga_cookie_usage, true, cookie_preferences_settings['usage'], class: 'govuk-radios__input' %>
            <%= label_tag :ga_cookie_usage, t('.use_cookies.ga'), for: :ga_cookie_usage_true, class: 'govuk-label govuk-radios__label' %>
          </div>
          <div class="govuk-radios__item">
            <%= radio_button_tag :ga_cookie_usage, false, !cookie_preferences_settings['usage'], class: 'govuk-radios__input' %>
            <%= label_tag :ga_cookie_usage, t('.dont_use_cookies.ga'), for: :ga_cookie_usage_false, class: 'govuk-label govuk-radios__label' %>
          </div>
        </div>
      </fieldset>

      <hr class="govuk-section-break govuk-section-break--m">

      <fieldset class="govuk-fieldset">
        <legend class="govuk-fieldset__legend">
          <h3 class="govuk-fieldset__heading govuk-heading-m">
            <%= t('home.cookies.measure_website_use.glassbox') %>
          </h3>
        </legend>

        <%= render partial: 'home/glassbox_cookies_info' %>

        <div class="govuk-radios">
          <div class="govuk-radios__item">
            <%= radio_button_tag :glassbox_cookie_usage, true, cookie_preferences_settings['glassbox'], class: 'govuk-radios__input' %>
            <%= label_tag :glassbox_cookie_usage, t('.use_cookies.glassbox'), for: :glassbox_cookie_usage_true, class: 'govuk-label govuk-radios__label' %>
          </div>
          <div class="govuk-radios__item">
            <%= radio_button_tag :glassbox_cookie_usage, false, !cookie_preferences_settings['glassbox'], class: 'govuk-radios__input' %>
            <%= label_tag :glassbox_cookie_usage, t('.dont_use_cookies.glassbox'), for: :glassbox_cookie_usage_false, class: 'govuk-label govuk-radios__label' %>
          </div>
        </div>
      </fieldset>
    </div>
  </div>

  <hr class="govuk-section-break govuk-section-break--m">

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-three-quarters">
      <h2 class="govuk-heading-m">
        <%= t('home.cookies.strictly_necessary_cookies') %>
      </h2>
      <p>
        <%= t('.essential_cookies') %>
      </p>
      <p>
        <%= t('.always_need_to_be_on') %>
      </p>
      <%= link_to t('.find_out_more'), cookie_policy_path, class: 'govuk-link--no-visited-state govuk-!-font-size-19' %>
    </div>
  </div>

  <hr class="govuk-section-break govuk-section-break--m">

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-three-quarters">
      <%= button_tag t('.save_changes'), class: 'govuk-button', id: 'save-cookie-settings-button' %>
    </div>
  </div>
<% end %>