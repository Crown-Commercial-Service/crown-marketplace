<div class="govuk-width-container">
  <%= link_to 'Back', search_path(params.permit(:nominated_worker, :postcode)), class: 'govuk-back-link' %>
  <main class="govuk-main-wrapper">
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-full">
        <div class="govuk-grid-row">
          <h1 class="govuk-heading-xl">Suppliers List</h1>
          <p class="govuk-body">
            <% if @point %>
            <span class="govuk-body-l"><%= @branches.count %></span> results found within <strong><%= Branch::DEFAULT_SEARCH_RANGE_IN_MILES %> miles</strong> of <strong><%= @postcode %></strong>
            <% else %>
            <span class="govuk-body-l"><%= @branches.count %></span> results found
            <% end %>
          </p>
        </div>
        <% if @branches.any? %>
          <% @branches.each do |branch| %>
          <div class="govuk-grid-row branch">
            <h2 class="govuk-heading-l"><%= branch.supplier.name %></h2>
            <div class="govuk-grid-column-one-half">
              <p class="govuk-body">
                <%= branch.contact_name %><br />
                <%= mail_to(branch.contact_email) %>
              </p>
            </div>
            <div class="govuk-grid-column-one-half">
              <% if @point %>
                <p class="govuk-body govuk-!-font-size-48 distance">
                  <%= number_with_precision(metres_to_miles(@point.distance(branch.location)), precision: 1) %>
                </p>
                <p class="govuk-body-s">miles</p>
              <% end %>
            </div>
          </div>
          <% end %>
        <% end %>
      </div>
    </div>
  </main>
</div>
